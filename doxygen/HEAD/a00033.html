<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>sot-core: sot::FactoryStorage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="a00185.html">sot</a>::<a class="el" href="a00033.html">FactoryStorage</a>
  </div>
</div>
<div class="contents">
<h1>sot::FactoryStorage Class Reference<br/>
<small>
[<a class="el" href="a00189.html">Factory</a>]</small>
</h1><!-- doxytag: class="sot::FactoryStorage" -->
<p>This class implements the factory that allows creation of objects loaded from dynamic link libraries. Objects are referenced by their class names, and can be created by passing this string to one of the three public "new" methods (newEntity, newFeature or newTask). The factory instance (singleton) is publicly available under the name sotFactory (include factory.h). A task, feature or entity can register itself by using the SOT_FACTORY_{ENTITY,TASK,FEATURE}_PLUGIN macro. See Task.cpp for an example.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;sot-core/factory.h&gt;</code></p>
<div class="dynheader">
Collaboration diagram for sot::FactoryStorage:</div>
<div class="dynsection">
<div class="center"><img src="a00421.png" border="0" usemap="#sot_1_1_factory_storage_coll__map" alt="Collaboration graph"/></div>
<map name="sot_1_1_factory_storage_coll__map" id="sot_1_1_factory_storage_coll__map">
<area shape="rect" title="STL class." alt="" coords="240,32,325,59"/><area shape="rect" title="STL class." alt="" coords="5,32,189,59"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="a00422.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="a00035.html">FeatureAbstract</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a705987fd3fbf78e44eaca43393e494d6">FeatureConstructor_ptr</a> )(const std::string &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="a00092.html">TaskAbstract</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a23ec7b914a9733dde7e21bfa06a1964c">TaskConstructor_ptr</a> )(const std::string &amp;)</td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a1af69d6f4a7f5ef8542262023d0af04b">~FactoryStorage</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a69fd24955ebba63e49fcbc3c59c5b425">registerTask</a> (const std::string &amp;entname, <a class="el" href="a00033.html#a23ec7b914a9733dde7e21bfa06a1964c">TaskConstructor_ptr</a> ent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00092.html">TaskAbstract</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a8f7ae0997c62da17c31676dafd5d64bc">newTask</a> (const std::string &amp;name, const std::string &amp;objname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#aeaa389089165fbf4bd03c31220506dfb">existTask</a> (const std::string &amp;name, TaskMap::iterator &amp;entPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a59fd18465f07f92ad4af9041887a4ddb">existTask</a> (const std::string &amp;name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a2d43c94179a1b6b46d76c98a639b61b1">registerFeature</a> (const std::string &amp;entname, <a class="el" href="a00033.html#a705987fd3fbf78e44eaca43393e494d6">FeatureConstructor_ptr</a> ent)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00035.html">FeatureAbstract</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a4d7dbf2ee77517d1d6f0dd2792cf5028">newFeature</a> (const std::string &amp;name, const std::string &amp;objname)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a2b439cf2aafd541cd021fc1a9fc8e166">existFeature</a> (const std::string &amp;name, FeatureMap::iterator &amp;entPtr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#afed729bcc3c07959709796216617deb2">existFeature</a> (const std::string &amp;name)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#aa7b5a7ae69d0a7da18ae0491cf9b4a10">commandLine</a> (const std::string &amp;cmdLine, std::istringstream &amp;cmdArgs, std::ostream &amp;os)</td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::string, <br class="typebreak"/>
<a class="el" href="a00033.html#a23ec7b914a9733dde7e21bfa06a1964c">TaskConstructor_ptr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#abaf4d158e589bcce468a983f451a3f69">TaskMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; std::string, <br class="typebreak"/>
<a class="el" href="a00033.html#a705987fd3fbf78e44eaca43393e494d6">FeatureConstructor_ptr</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a74e19ca0718a766e1aea9e2b155b2732">FeatureMap</a></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00033.html#a74e19ca0718a766e1aea9e2b155b2732">FeatureMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a3a3618c8a5c7a336a4675462693312ff">featureMap</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00033.html#abaf4d158e589bcce468a983f451a3f69">TaskMap</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00033.html#a8a9abd17489237dd5478a9dcba7fb0c2">taskMap</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class implements the factory that allows creation of objects loaded from dynamic link libraries. Objects are referenced by their class names, and can be created by passing this string to one of the three public "new" methods (newEntity, newFeature or newTask). The factory instance (singleton) is publicly available under the name sotFactory (include factory.h). A task, feature or entity can register itself by using the SOT_FACTORY_{ENTITY,TASK,FEATURE}_PLUGIN macro. See Task.cpp for an example. </p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a705987fd3fbf78e44eaca43393e494d6"></a><!-- doxytag: member="sot::FactoryStorage::FeatureConstructor_ptr" ref="a705987fd3fbf78e44eaca43393e494d6" args=")(const std::string &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="a00035.html">FeatureAbstract</a>*(* <a class="el" href="a00033.html#a705987fd3fbf78e44eaca43393e494d6">sot::FactoryStorage::FeatureConstructor_ptr</a>)(const std::string &amp;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a74e19ca0718a766e1aea9e2b155b2732"></a><!-- doxytag: member="sot::FactoryStorage::FeatureMap" ref="a74e19ca0718a766e1aea9e2b155b2732" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt; std::string,<a class="el" href="a00033.html#a705987fd3fbf78e44eaca43393e494d6">FeatureConstructor_ptr</a> &gt; <a class="el" href="a00033.html#a74e19ca0718a766e1aea9e2b155b2732">sot::FactoryStorage::FeatureMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a23ec7b914a9733dde7e21bfa06a1964c"></a><!-- doxytag: member="sot::FactoryStorage::TaskConstructor_ptr" ref="a23ec7b914a9733dde7e21bfa06a1964c" args=")(const std::string &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="a00092.html">TaskAbstract</a>*(* <a class="el" href="a00033.html#a23ec7b914a9733dde7e21bfa06a1964c">sot::FactoryStorage::TaskConstructor_ptr</a>)(const std::string &amp;)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abaf4d158e589bcce468a983f451a3f69"></a><!-- doxytag: member="sot::FactoryStorage::TaskMap" ref="abaf4d158e589bcce468a983f451a3f69" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt; std::string,<a class="el" href="a00033.html#a23ec7b914a9733dde7e21bfa06a1964c">TaskConstructor_ptr</a> &gt; <a class="el" href="a00033.html#abaf4d158e589bcce468a983f451a3f69">sot::FactoryStorage::TaskMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1af69d6f4a7f5ef8542262023d0af04b"></a><!-- doxytag: member="sot::FactoryStorage::~FactoryStorage" ref="a1af69d6f4a7f5ef8542262023d0af04b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sot::FactoryStorage::~FactoryStorage </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aa7b5a7ae69d0a7da18ae0491cf9b4a10"></a><!-- doxytag: member="sot::FactoryStorage::commandLine" ref="aa7b5a7ae69d0a7da18ae0491cf9b4a10" args="(const std::string &amp;cmdLine, std::istringstream &amp;cmdArgs, std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sot::FactoryStorage::commandLine </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>cmdLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::istringstream &amp;&nbsp;</td>
          <td class="paramname"> <em>cmdArgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afed729bcc3c07959709796216617deb2"></a><!-- doxytag: member="sot::FactoryStorage::existFeature" ref="afed729bcc3c07959709796216617deb2" args="(const std::string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sot::FactoryStorage::existFeature </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2b439cf2aafd541cd021fc1a9fc8e166"></a><!-- doxytag: member="sot::FactoryStorage::existFeature" ref="a2b439cf2aafd541cd021fc1a9fc8e166" args="(const std::string &amp;name, FeatureMap::iterator &amp;entPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sot::FactoryStorage::existFeature </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FeatureMap::iterator &amp;&nbsp;</td>
          <td class="paramname"> <em>entPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a59fd18465f07f92ad4af9041887a4ddb"></a><!-- doxytag: member="sot::FactoryStorage::existTask" ref="a59fd18465f07f92ad4af9041887a4ddb" args="(const std::string &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sot::FactoryStorage::existTask </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aeaa389089165fbf4bd03c31220506dfb"></a><!-- doxytag: member="sot::FactoryStorage::existTask" ref="aeaa389089165fbf4bd03c31220506dfb" args="(const std::string &amp;name, TaskMap::iterator &amp;entPtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sot::FactoryStorage::existTask </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TaskMap::iterator &amp;&nbsp;</td>
          <td class="paramname"> <em>entPtr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d7dbf2ee77517d1d6f0dd2792cf5028"></a><!-- doxytag: member="sot::FactoryStorage::newFeature" ref="a4d7dbf2ee77517d1d6f0dd2792cf5028" args="(const std::string &amp;name, const std::string &amp;objname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00035.html">FeatureAbstract</a>* sot::FactoryStorage::newFeature </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>objname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8f7ae0997c62da17c31676dafd5d64bc"></a><!-- doxytag: member="sot::FactoryStorage::newTask" ref="a8f7ae0997c62da17c31676dafd5d64bc" args="(const std::string &amp;name, const std::string &amp;objname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00092.html">TaskAbstract</a>* sot::FactoryStorage::newTask </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>objname</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2d43c94179a1b6b46d76c98a639b61b1"></a><!-- doxytag: member="sot::FactoryStorage::registerFeature" ref="a2d43c94179a1b6b46d76c98a639b61b1" args="(const std::string &amp;entname, FeatureConstructor_ptr ent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sot::FactoryStorage::registerFeature </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>entname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00033.html#a705987fd3fbf78e44eaca43393e494d6">FeatureConstructor_ptr</a>&nbsp;</td>
          <td class="paramname"> <em>ent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a69fd24955ebba63e49fcbc3c59c5b425"></a><!-- doxytag: member="sot::FactoryStorage::registerTask" ref="a69fd24955ebba63e49fcbc3c59c5b425" args="(const std::string &amp;entname, TaskConstructor_ptr ent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sot::FactoryStorage::registerTask </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>entname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00033.html#a23ec7b914a9733dde7e21bfa06a1964c">TaskConstructor_ptr</a>&nbsp;</td>
          <td class="paramname"> <em>ent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a3a3618c8a5c7a336a4675462693312ff"></a><!-- doxytag: member="sot::FactoryStorage::featureMap" ref="a3a3618c8a5c7a336a4675462693312ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00033.html#a74e19ca0718a766e1aea9e2b155b2732">FeatureMap</a> <a class="el" href="a00033.html#a3a3618c8a5c7a336a4675462693312ff">sot::FactoryStorage::featureMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8a9abd17489237dd5478a9dcba7fb0c2"></a><!-- doxytag: member="sot::FactoryStorage::taskMap" ref="a8a9abd17489237dd5478a9dcba7fb0c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00033.html#abaf4d158e589bcce468a983f451a3f69">TaskMap</a> <a class="el" href="a00033.html#a8a9abd17489237dd5478a9dcba7fb0c2">sot::FactoryStorage::taskMap</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
</body>
</html>
